version: '3'

services:

  # Base Images

  php56-fpm-stretch-base:
    image: my127/php:5.6-fpm-stretch${TAG_SUFFIX:-}
    build:
      context: ./
      dockerfile: Dockerfile
      target: base
      args:
        VERSION: 5.6
        REDIS_VERSION: 5.0
        BASEOS: stretch

  php70-fpm-stretch-base:
    image: my127/php:7.0-fpm-stretch${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.0
        REDIS_VERSION: 5.0
        BASEOS: stretch

  php71-fpm-stretch-base:
    image: my127/php:7.1-fpm-stretch${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.1
        REDIS_VERSION: 5.0
        BASEOS: stretch

  php72-fpm-stretch-base:
    image: my127/php:7.2-fpm-stretch${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.2
        REDIS_VERSION: 5.0
        BASEOS: stretch

  php73-fpm-stretch-base:
    image: my127/php:7.3-fpm-stretch${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.3
        REDIS_VERSION: 5.0
        BASEOS: stretch

  php73-fpm-buster-base:
    image: my127/php:7.3-fpm-buster${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.3
        BASEOS: buster

  php74-fpm-buster-base:
    image: my127/php:7.4-fpm-buster${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.4
        BASEOS: buster

  php74-fpm-bullseye-base:
    image: my127/php:7.4-fpm-bullseye${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 7.4
        BASEOS: bullseye

  php80-fpm-buster-base:
    image: my127/php:8.0-fpm-buster${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 8.0
        BASEOS: buster

  php80-fpm-bullseye-base:
    image: my127/php:8.0-fpm-bullseye${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 8.0
        BASEOS: bullseye

  php81-fpm-bullseye-base:
    image: my127/php:8.1-fpm-bullseye${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 8.1
        BASEOS: bullseye

  php81-fpm-bookworm-base:
    image: my127/php:8.1-fpm-bookworm${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 8.1
        BASEOS: bookworm

  php82-fpm-bullseye-base:
    image: my127/php:8.2-fpm-bullseye${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 8.2
        BASEOS: bullseye

  php82-fpm-bookworm-base:
    image: my127/php:8.2-fpm-bookworm${TAG_SUFFIX:-}
    build:
      context: ./
      target: base
      args:
        VERSION: 8.2
        BASEOS: bookworm

  # Console Images

  php56-fpm-stretch-console:
    image: my127/php:5.6-fpm-stretch-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 5.6
        REDIS_VERSION: 5.0
        BASEOS: stretch
    depends_on:
      - php56-fpm-stretch-base

  php70-fpm-stretch-console:
    image: my127/php:7.0-fpm-stretch-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.0
        REDIS_VERSION: 5.0
        BASEOS: stretch
    depends_on:
      - php70-fpm-stretch-base

  php71-fpm-stretch-console:
    image: my127/php:7.1-fpm-stretch-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.1
        REDIS_VERSION: 5.0
        BASEOS: stretch
    depends_on:
      - php71-fpm-stretch-base

  php72-fpm-stretch-console:
    image: my127/php:7.2-fpm-stretch-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.2
        REDIS_VERSION: 5.0
        BASEOS: stretch
    depends_on:
      - php72-fpm-stretch-base

  php73-fpm-stretch-console:
    image: my127/php:7.3-fpm-stretch-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.3
        REDIS_VERSION: 5.0
        BASEOS: stretch
    depends_on:
      - php73-fpm-stretch-base

  php73-fpm-buster-console:
    image: my127/php:7.3-fpm-buster-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.3
        BASEOS: buster
    depends_on:
      - php73-fpm-buster-base

  php74-fpm-buster-console:
    image: my127/php:7.4-fpm-buster-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.4
        BASEOS: buster
    depends_on:
      - php74-fpm-buster-base

  php74-fpm-bullseye-console:
    image: my127/php:7.4-fpm-bullseye-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 7.4
        BASEOS: bullseye
    depends_on:
      - php74-fpm-bullseye-base

  php80-fpm-buster-console:
    image: my127/php:8.0-fpm-buster-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 8.0
        BASEOS: buster
    depends_on:
      - php80-fpm-buster-base

  php80-fpm-bullseye-console:
    image: my127/php:8.0-fpm-bullseye-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 8.0
        BASEOS: bullseye
    depends_on:
      - php80-fpm-bullseye-base

  php81-fpm-bullseye-console:
    image: my127/php:8.1-fpm-bullseye-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 8.1
        BASEOS: bullseye
    depends_on:
      - php81-fpm-bullseye-base

  php81-fpm-bookworm-console:
    image: my127/php:8.1-fpm-bookworm-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 8.1
        BASEOS: bookworm
    depends_on:
      - php81-fpm-bookworm-base

  php82-fpm-bullseye-console:
    image: my127/php:8.2-fpm-bullseye-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 8.2
        BASEOS: bullseye
    depends_on:
      - php82-fpm-bullseye-base

  php82-fpm-bookworm-console:
    image: my127/php:8.2-fpm-bookworm-console${TAG_SUFFIX:-}
    build:
      context: ./
      target: console
      args:
        VERSION: 8.2
        BASEOS: bookworm
    depends_on:
      - php82-fpm-bookworm-base
